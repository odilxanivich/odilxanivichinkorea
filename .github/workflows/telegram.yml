name: Notify Telegram on Markdown Push

on:
  push:
    paths:
      - '**/*.md'

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Extract commit info
        run: |
          echo "TITLE=${{ github.event.head_commit.message }}" >> $GITHUB_ENV
          echo "DESC=${{ github.event.head_commit.id }}" >> $GITHUB_ENV

      - name: Send Telegram message
        run: |
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage \
            -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
            -d parse_mode=HTML \
            -d text="ğŸ”¥ <b>Yangi post qoâ€˜shildi!</b><br><br>ğŸ“ <b>Sarlavha:</b> ${{ env.TITLE }}<br>ğŸ’¡ <i>Commit ID:</i> ${{ env.DESC }}"
